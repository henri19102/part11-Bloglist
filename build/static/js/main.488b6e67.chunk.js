(this.webpackJsonpblogilista=this.webpackJsonpblogilista||[]).push([[0],{62:function(e,t,n){e.exports=n(92)},91:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),l=n.n(c),u=n(21),o=n(45),s=n(5),i=n.n(s),m=n(9),f=n(11),p=n(97),d=function(){var e,t=Object(u.c)((function(e){return e.notification})),n={};return""===t.msg&&(n={display:"none"}),e="success"===t.suc?"success":"danger",r.a.createElement("div",{style:n}," ",t.msg&&r.a.createElement(p.a,{variant:e},t.msg))},E=n(94),b=r.a.forwardRef((function(e,t){var n=Object(a.useState)(!1),c=Object(f.a)(n,2),l=c[0],u=c[1],o={display:l?"none":""},s={display:l?"":"none"},i=function(){u(!l)};return Object(a.useImperativeHandle)(t,(function(){return{toggleVisibility:i}})),r.a.createElement("div",null,r.a.createElement("div",{style:o},r.a.createElement(E.a,{onClick:i},e.buttonLabel)),r.a.createElement("div",{style:s,className:"togglableContent"},e.children,r.a.createElement(E.a,{onClick:i},"cancel")))}));b.displayName="Togglable";var v=b,g=n(95),h=function(e){var t=Object(a.useState)(""),n=Object(f.a)(t,2),c=n[0],l=n[1],u=Object(a.useState)(""),o=Object(f.a)(u,2),s=o[0],i=o[1],m=Object(a.useState)(""),p=Object(f.a)(m,2),d=p[0],b=p[1];return r.a.createElement("div",null,r.a.createElement("h2",null,"Create new"),r.a.createElement(g.a,{onSubmit:function(t){t.preventDefault(),e.createBlog({title:c,author:s,url:d}),l(""),i(""),b("")}},r.a.createElement(g.a.Group,null,r.a.createElement(g.a.Label,null,"Author"),r.a.createElement(g.a.Control,{size:"sm",value:s,onChange:function(e){var t=e.target;return i(t.value)}})),r.a.createElement(g.a.Group,null,r.a.createElement(g.a.Label,null,"Title"),r.a.createElement(g.a.Control,{size:"sm",value:c,onChange:function(e){var t=e.target;return l(t.value)}})),r.a.createElement(g.a.Group,null,r.a.createElement(g.a.Label,null,"URL"),r.a.createElement(g.a.Control,{size:"sm",value:d,onChange:function(e){var t=e.target;return b(t.value)}})),r.a.createElement(E.a,{type:"submit"},"create")))},O=n(20),j=n(99),y=function(e){var t=e.blogs;return r.a.createElement("div",null,r.a.createElement(j.a,{as:"ul"},t.map((function(e){return r.a.createElement(j.a.Item,{as:"li",key:e.id},r.a.createElement(O.b,{to:"/blogs/".concat(e.id)}," ",e.title," "))}))))},w=n(6),k=function(e){var t=e.blogs,n=e.comments,c=e.handleLike,l=e.handleRemove,u=e.createComment,o=Object(a.useState)(""),s=Object(f.a)(o,2),i=s[0],m=s[1],p=Object(w.f)(),d=Object(w.g)().id,b={comment:i,blogID:d},v=t.find((function(e){return e.id===d})),h=n.filter((function(e){return e.blogID===d}));console.log(h);return v?r.a.createElement("div",null,r.a.createElement("h2",null,v.title),r.a.createElement("h4",null,"added by ",v.user.name),r.a.createElement("a",{href:v.url},v.url),r.a.createElement("h4",null,"likes: ",v.likes," ",r.a.createElement(E.a,{onClick:function(){return c(v.id)}},"like")),r.a.createElement("h3",null,"comments"),r.a.createElement(g.a,{onSubmit:function(e){e.preventDefault(),u(b),m("")}},r.a.createElement(g.a.Group,null,r.a.createElement(g.a.Control,{value:i,onChange:function(e){var t=e.target;return m(t.value)}})),r.a.createElement(E.a,{variant:"success",type:"submit"},"add comment")),r.a.createElement(j.a,{style:{margin:"1%"}},h.map((function(e){return r.a.createElement(j.a.Item,{key:e.id},e.comment)}))),r.a.createElement(E.a,{variant:"danger",onClick:function(){return l(v.id,p)}},"remove blog")):null},x=n(13),C=n.n(x),S={login:function(){var e=Object(m.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=function(){return C.a.get("/api/users").then((function(e){return e.data}))},I={getAll:function(){return C.a.get("/api/comments").then((function(e){return e.data}))},newComment:function(){var e=Object(m.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.post("/api/comments",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},B=function(e){return localStorage.setItem("loggedBlogAppUser",JSON.stringify(e))},A=function(){return JSON.parse(localStorage.getItem("loggedBlogAppUser"))},N=function(){return localStorage.removeItem("loggedBlogAppUser")},T={msg:"",suc:""},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BACK":return T;case"MESSAGE":return{msg:t.message,suc:t.success};default:return e}},D=n(61),U=function(){return{headers:{Authorization:"bearer ".concat(A().token)}}},R=function(){return C.a.get("/api/blogs").then((function(e){return e.data}))},z=function(e){return C.a.post("/api/blogs",e,U()).then((function(e){return e.data}))},J=function(e){return C.a.put("".concat("/api/blogs","/").concat(e.id),e,U()).then((function(e){return e.data}))},K=function(e){return C.a.delete("".concat("/api/blogs","/").concat(e),U()).then((function(e){return e.data}))},M=function(e,t){return t.likes-e.likes},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALL":return t.data;case"NEW_BLOG":return[].concat(Object(D.a)(e),[t.data]);case"LIKE":return e.map((function(e){return e.id===t.data.id?t.data:e})).sort(M);case"DELETE":return e.filter((function(e){return e.id!==t.data}));default:return e}},F=function(e){return{type:"SET",user:e}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET":return t.user;default:return e}},_=n(96),H=n(98),V=function(){var e=Object(u.c)((function(e){return e.blog})),t=Object(u.c)((function(e){return e.user})),n=Object(u.b)(),c=Object(a.useState)(""),l=Object(f.a)(c,2),s=l[0],p=l[1],b=Object(a.useState)(""),x=Object(f.a)(b,2),C=x[0],T=x[1],G=Object(a.useState)([]),D=Object(f.a)(G,2),U=D[0],M=D[1],W=Object(a.useState)([]),P=Object(f.a)(W,2),V=P[0],q=P[1],Q=r.a.createRef();Object(a.useEffect)((function(){(function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:t=e.sent,M(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.useEffect)((function(){(function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getAll();case 2:t=e.sent,q(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.useEffect)((function(){n(function(){var e=Object(m.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:n=e.sent,t({type:"ALL",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[n]),Object(a.useEffect)((function(){var e=A();n(F(e))}),[n]);var X=function(e,t){n(function(e,t){return function(n){n({type:"MESSAGE",message:e,success:t}),setTimeout((function(){n({type:"BACK"})}),5e3)}}(e,t))},Y=function(){var e=Object(m.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.newComment(t);case 3:n=e.sent,q(V.concat(n)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,S.login({username:s,password:C});case 4:a=e.sent,p(""),T(""),n(F(a)),X("".concat(a.name," welcome back!"),"success"),B(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),X("wrong username/password");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){n(F(null)),N()},ee=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Users"),r.a.createElement(j.a,{as:"ul"},U.map((function(e){return r.a.createElement(j.a.Item,{as:"li",key:e.id},r.a.createElement(O.b,{to:"/users/".concat(e.id)}," ",e.name,", blogs: ",e.blogs.length," "))}))))},te=function(e){var t=e.users,n=Object(w.g)().id,a=t.find((function(e){return e.id===n}));return a?0===a.blogs.length?r.a.createElement("div",null,r.a.createElement("h2",null,a.name),r.a.createElement("h3",null,"added blogs"),r.a.createElement("p",null,"none...")):r.a.createElement("div",null,r.a.createElement("h2",null,a.name),r.a.createElement("h4",null,"Users blogs:"),r.a.createElement(j.a,null,a.blogs.map((function(e){return r.a.createElement(j.a.Item,{key:e.id},e.title)})))):null},ne=function(){return r.a.createElement("div",null,r.a.createElement(_.a,{bg:"dark",variant:"dark",expand:"lg"},r.a.createElement(_.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(_.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(H.a,{className:"mr-auto"},r.a.createElement(H.a.Link,null,r.a.createElement(O.b,{className:"navFont",to:"/"},"Blogs")),r.a.createElement(H.a.Link,null,r.a.createElement(O.b,{className:"navFont",to:"/users"},"Users"))),r.a.createElement(_.a.Collapse,{className:"justify-content-end"},r.a.createElement(_.a.Text,null,"Signed in as:"),r.a.createElement(_.a.Text,{className:"navText"}," ",t.name),r.a.createElement(H.a.Link,null,r.a.createElement(E.a,{onClick:$},"logout"))))))};return t?r.a.createElement(O.a,null,r.a.createElement("div",{className:"container"},r.a.createElement(ne,null),r.a.createElement("h2",null,"Blogs"),r.a.createElement(d,null),r.a.createElement(w.c,null,r.a.createElement(w.a,{path:"/blogs/:id"},r.a.createElement(k,{blogs:e,comments:V,handleLike:function(t){var a,r=e.find((function(e){return e.id===t})),c=Object(o.a)(Object(o.a)({},r),{},{likes:r.likes+1,user:r.user.id});n((a=c,function(){var e=Object(m.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(a);case 2:n=e.sent,t({type:"LIKE",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},handleRemove:function(t,a){var r=e.find((function(e){return e.id===t}));window.confirm("Remove blog ".concat(r.title," by ").concat(r.author))&&(n(function(e){return function(){var t=Object(m.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K(e);case 2:n({type:"DELETE",data:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(r.id)),a.push("/"))},createComment:Y})),r.a.createElement(w.a,{path:"/users/:id"},r.a.createElement(te,{users:U})),r.a.createElement(w.a,{path:"/users"},r.a.createElement(ee,null)),r.a.createElement(w.a,{path:"/"},r.a.createElement(v,{buttonLabel:"create new blog",ref:Q},r.a.createElement(h,{createBlog:function(e){n(function(e){return function(){var t=Object(m.a)(i.a.mark((function t(n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(e);case 2:a=t.sent,n({type:"NEW_BLOG",data:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e)),X("a new blog '".concat(e.title,"' by ").concat(e.author," added!"),"success")}})),r.a.createElement(y,{blogs:e}))))):r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Login to application"),r.a.createElement(d,null),r.a.createElement(g.a,{onSubmit:Z},r.a.createElement(g.a.Group,{controlId:"formBasicEmail"},r.a.createElement(g.a.Label,null,"Username"),r.a.createElement(g.a.Control,{value:s,onChange:function(e){var t=e.target;return p(t.value)},placeholder:"Enter username"})),r.a.createElement(g.a.Group,{controlId:"formBasicPassword"},r.a.createElement(g.a.Label,null,"Password"),r.a.createElement(g.a.Control,{value:C,onChange:function(e){var t=e.target;return T(t.value)},type:"password",placeholder:"Enter password"})),r.a.createElement(E.a,{variant:"primary",type:"submit"},"login")))},q=(n(91),n(23)),Q=n(59),X=n(60),Y=Object(q.combineReducers)({notification:G,blog:W,user:P}),Z=Object(q.createStore)(Y,Object(X.composeWithDevTools)(Object(q.applyMiddleware)(Q.a)));l.a.render(r.a.createElement(u.a,{store:Z},r.a.createElement(V,null)),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.488b6e67.chunk.js.map